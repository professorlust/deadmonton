{"src/index.js":{"js":"var $$___src_index = {};\n$$___src_index = (function(module, exports) {\n\n  $($$___src_app);\n\n  return module.exports;\n})({exports: $$___src_index}, $$___src_index);","mtime":1382955788000,"v3SourceMap":"{\"version\":3,\"file\":\"src/index.js\",\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"tmp\"}","deps":["src/app.coffee"],"requires":{},"fn":"src/index.js"},"src/app.coffee":{"js":"var $$___src_app = {};\n$$___src_app = (function(module, exports) {\n\n  var Layout, config;\n\nconfig = $$___src_config;\n\nLayout = $$___src_views_layout;\n\nmodule.exports = function() {\n  var canvas, ctx, height, width;\n  (new Layout()).render();\n  width = $(window).width();\n  height = $(window).height();\n  $('#map').css('width', \"\" + width + \"px\").css('height', \"\" + height + \"px\");\n  $('#canvas').attr('width', width).attr('height', height);\n  canvas = document.getElementById(\"canvas\");\n  ctx = canvas.getContext(\"2d\");\n  return $.getJSON('data/crime.json', function(data) {\n    var a, b, date, diff, i1, i2, map, particles;\n    map = new L.Map('map', {\n      'center': new L.LatLng(53.5501, -113.5049),\n      'zoom': 12,\n      'zoomControl': false\n    });\n    L.tileLayer.provider('Stamen.Toner').addTo(map);\n    particles = [];\n    a = moment(new Date(data[0].t));\n    b = moment(new Date(data[data.length - 1].t));\n    diff = b.diff(a, 'days');\n    date = $('#date');\n    i1 = setInterval(function() {\n      var go, i, particle;\n      if (a > b) {\n        return (function() {\n          var _i, _len, _ref, _results;\n          _ref = [i1, i2];\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            i = _ref[_i];\n            _results.push(clearInterval(i));\n          }\n          return _results;\n        })();\n      }\n      date.html(a.format(\"ddd, Do MMMM YYYY\"));\n      go = true;\n      while (go && data.length) {\n        if (a >= new Date(data[0].t)) {\n          particle = data.shift();\n          particle.ttl = 10;\n          particle.point = map.latLngToLayerPoint(particle.l);\n          particle.color = config.colors[particle.c].join(',');\n          particles.push(particle);\n        } else {\n          go = false;\n        }\n      }\n      return a = a.add('d', 1);\n    }, 2e2);\n    return i2 = setInterval(function() {\n      var color, gradient, particle, point, rad, _i, _len, _results;\n      ctx.globalCompositeOperation = \"source-out\";\n      ctx.fillStyle = \"rgba(0,0,0,0.1)\";\n      ctx.fillRect(0, 0, width, height);\n      ctx.globalCompositeOperation = 'darker';\n      _results = [];\n      for (_i = 0, _len = particles.length; _i < _len; _i++) {\n        particle = particles[_i];\n        point = particle.point, color = particle.color;\n        rad = particle.ttl;\n        gradient = ctx.createRadialGradient(point.x, point.y, 0, point.x, point.y, rad);\n        gradient.addColorStop(0.0, \"white\");\n        gradient.addColorStop(0.8, \"rgba(\" + color + \",0.5)\");\n        gradient.addColorStop(1.0, \"black\");\n        ctx.beginPath();\n        ctx.fillStyle = gradient;\n        ctx.arc(point.x, point.y, rad, 0, Math.PI * 2, false);\n        ctx.closePath();\n        ctx.fill();\n        if (particle.ttl > 3) {\n          _results.push(particle.ttl -= 0.1);\n        } else {\n          _results.push(void 0);\n        }\n      }\n      return _results;\n    }, 33);\n  });\n};\n\n\n  return module.exports;\n})({exports: $$___src_app}, $$___src_app);","mtime":1382980624000,"v3SourceMap":"{\"version\":3,\"file\":\"src/app.coffee\",\"sources\":[\"src/app.coffee\"],\"names\":[],\"mappings\":\";;;AAAA,IAAI,UAAU;;AAAd,CAAC,EAAQ,GAAH,CAAG,GAAA;;AAET,CAFC,EAEQ,GAAH,CAAG,SAAA;;AAET,CAJC,EAIgB,GAAX,CAAC,EAAU;CAEb,KAAA,oBAAA;CAAA,CAAG,EAAK,EAAA;CAAR,CAGA,CAAW,EAAX,CAAW;CAHX,CAIA,CAAY,GAAZ;CAJA,CAMA,CAAA,CAAA,CAAuB,CAAvB,CAAA,CAAA;CANA,CAOA,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA;CAPA,CASA,CAAS,GAAT,EAAiB,MAAR;CATT,CAUA,CAAA,CAAM,EAAM,IAAN;CAGL,CAA4B,CAAA,CAAA,GAA7B,EAAA,QAAA;CAEI,OAAA,gCAAA;CAAA,CACI,CADJ,CAAA,CAAU;AAC2B,CAAjC,CAAc,EAAA,EAAd,CAAc,CAAd;CAAA,CACQ,IAAR;CADA,CAEe,GAFf,CAEA,OAAA;CAHJ,KAAU;CAAV,EAIA,CAAA,CAAA,GAAA,CAAW,KAAX;CAJA,CAAA,CAOY,CAAZ,KAAA;CAPA,EAUI,CAAJ,EAAI;CAVJ,EAWI,CAAJ,EAAI;CAXJ,CAaiB,CAAV,CAAP,EAAO;CAbP,EAeO,CAAP,GAAO;CAfP,CAkBA,CAAK,CAAL,KAAiB,EAAZ;CAGD,SAAA,KAAA;CAAA,EAAuD,CAAJ,EAAnD;CAAA;;CAAS;CAAA;gBAAA,2BAAA;0BAAA;CAAA,YAAA;CAAA;;CAAT;QAAA;CAAA,GAGI,EAAJ,aAAU;CAHV,CAMA,CAAK,CANL,EAMA;CACA,CAAM,CAAN,CAAa,EAAb,OAAM;CAEF,GAAG,IAAH;CACI,EAAc,CAAI,CAAP,GAAX,EAAA;CAAA,CAAA,CAEA,KAAQ,EAAR;CAFA,EAIiB,EAAjB,GAAQ,EAAR,QAAiB;CAJjB,EAMiB,CAAA,CAAjB,CAAuB,EAAf,EAAR;CANA,GAQA,IAAA,CAAS,CAAT;MATJ,IAAA;CAWI,CAAA,CAAK,EAAL,KAAA;UAbR;CAPA,MAOA;CAgBA,CAAe,CAAX,UAAJ;CA1BC,CA4BH,CA5BG,EAAY;CA+BA,CAAjB,CAAK,MAAY,EAAjB;CAGI,SAAA,+CAAA;CAAA,EAAG,GAAH,MAAA,YAAA;CAAA,EAEG,GAAH,GAAA,QAFA;CAAA,CAGgB,CAAb,EAAH,CAAA,EAAA;CAHA,EAKG,GAAH,EALA,gBAKA;AAEA,CAAA;YAAA,oCAAA;kCAAA;CACI,CAAS,GAAT,GAAE;CAAF,EAEA,KAAA;CAFA,CAI6C,CAAlC,EAA8B,GAAzC,YAAW;CAJX,CAK2B,CAA3B,IAAA,CAAA,IAAA;CALA,CAM4B,CAA5B,EAA4B,EAAA,CAA5B,IAAA;CANA,CAO2B,CAA3B,IAAA,CAAA,IAAA;CAPA,EAUM,KAAH,CAAH;CAVA,EAYG,KAAH,CAAA;CAZA,CAaiB,CAAd,CAAmC,CAAzB,GAAb;CAbA,EAgBM,KAAH,CAAH;CAhBA,EAiBM,CAAN,IAAG;CAGH,EAAuB,CAAA,IAAvB;CAAA,EAAA,CAAgB,IAAR;MAAR,IAAA;CAAA;UArBJ;CAAA;uBAVa;CAAZ,CAiCH,GAjCe;CAnDrB,EAA6B;CAfhB\",\"sourceRoot\":\"tmp\"}","deps":["src/config.coffee","src/views/layout.coffee"],"requires":{},"fn":"src/app.coffee"},"src/views/layout.coffee":{"js":"var $$___src_views_layout = {};\n$$___src_views_layout = (function(module, exports) {\n\n  var Controls, Layout,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nControls = $$___src_views_controls;\n\nLayout = (function(_super) {\n  __extends(Layout, _super);\n\n  Layout.prototype.el = 'body';\n\n  Layout.prototype.template = JST.layout;\n\n  function Layout() {\n    Layout.__super__.constructor.apply(this, arguments);\n    this.views = [];\n  }\n\n  Layout.prototype.render = function() {\n    var view;\n    $(this.el).html(Mustache.render(this.template, {}));\n    this.views.push(view = new Controls());\n    view.render();\n    return this;\n  };\n\n  return Layout;\n\n})(Backbone.View);\n\nmodule.exports = Layout;\n\n\n  return module.exports;\n})({exports: $$___src_views_layout}, $$___src_views_layout);","mtime":1382955788000,"v3SourceMap":"{\"version\":3,\"file\":\"src/views/layout.coffee\",\"sources\":[\"src/views/layout.coffee\"],\"names\":[],\"mappings\":\";;;AAAA,IAAI,YAAY;GAAb;kSAA+R;;AAAlS,CAAC,EAAU,IAAA,CAAH,IAAG;;AAEL,CAFL;CAIG;;CAAA,CAAA,CAAI,GAAJ;;CAAA,EAEU,GAFV,EAEA;;CAEa,CAAA,CAAA,aAAA;CACT,GAAA,KAAA,gCAAA;CAAA,CAAA,CACS,CAAT,CAAA;CANJ,EAIa;;CAJb,EAQQ,GAAR,GAAQ;CACJ,GAAA,IAAA;CAAA,CAAA,EAAA,EAAY,EAAQ;CAApB,EAEuB,CAAvB,CAAM,GAAiB;CAFvB,GAGG,EAAH;CAJI,UAMJ;CAdJ,EAQQ;;CARR;;CAFiB,OAAQ;;AAkB7B,CApBC,EAoBgB,GAAX,CAAC\",\"sourceRoot\":\"tmp\"}","deps":["src/views/controls.coffee"],"requires":{},"fn":"src/views/layout.coffee"},"src/views/controls.coffee":{"js":"var $$___src_views_controls = {};\n$$___src_views_controls = (function(module, exports) {\n\n  var Controls, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nControls = (function(_super) {\n  __extends(Controls, _super);\n\n  function Controls() {\n    _ref = Controls.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  Controls.prototype.el = '#controls';\n\n  Controls.prototype.template = JST.controls;\n\n  Controls.prototype.events = {\n    'click .icon.play': 'onPlay',\n    'click .icon.pause': 'onPlay'\n  };\n\n  Controls.prototype.onPlay = function(evt) {\n    return $(this.el).find('.play, .pause').toggleClass('active');\n  };\n\n  Controls.prototype.render = function() {\n    $(this.el).html(Mustache.render(this.template, {}));\n    return this;\n  };\n\n  return Controls;\n\n})(Backbone.View);\n\nmodule.exports = Controls;\n\n\n  return module.exports;\n})({exports: $$___src_views_controls}, $$___src_views_controls);","mtime":1382955788000,"v3SourceMap":"{\"version\":3,\"file\":\"src/views/controls.coffee\",\"sources\":[\"src/views/controls.coffee\"],\"names\":[],\"mappings\":\";;;AAAA,IAAI,UAAU;GAAX;kSAA+R;;AAA5R,CAAL;CAEG;;;;;CAAA;;CAAA,CAAA,CAAI,QAAJ;;CAAA,EAEU,KAAV;;CAFA,EAKI,GADJ;CACI,CAAoB,EAApB,IAAA,UAAA;CAAA,CACqB,EAArB,IADA,WACA;CANJ,GAAA;;CAAA,EASQ,GAAR,GAAS;CACL,CAAA,EAAG,IAAH,GAAA,IAAA;CAVJ,EASQ;;CATR,EAYQ,GAAR,GAAQ;CACJ,CAAA,EAAA,EAAY,EAAQ;CADhB,UAGJ;CAfJ,EAYQ;;CAZR;;CAFmB,OAAQ;;AAmB/B,CAnBC,EAmBgB,GAAX,CAAC,CAnBC\",\"sourceRoot\":\"tmp\"}","deps":[],"requires":{},"fn":"src/views/controls.coffee"},"src/config.coffee":{"js":"var $$___src_config = {};\n$$___src_config = (function(module, exports) {\n\n  module.exports = {\n  'colors': {\n    'Theft From Vehicle': [255, 237, 160],\n    'Theft Of Vehicle': [254, 217, 118],\n    'Theft Over $5000': [254, 217, 118],\n    'Break and Enter': [253, 141, 60],\n    'Robbery': [253, 141, 60],\n    'Assault': [227, 26, 28],\n    'Sexual Assaults': [227, 26, 28],\n    'Homicide': [0, 0, 0]\n  }\n};\n\n\n  return module.exports;\n})({exports: $$___src_config}, $$___src_config);","mtime":1382955788000,"v3SourceMap":"{\"version\":3,\"file\":\"src/config.coffee\",\"sources\":[\"src/config.coffee\"],\"names\":[],\"mappings\":\";;;AAAA,CAAO,EAGH,GAHE,CAAC;CAGH,CAAA,MAAA;CACI,CAAsB,CAAA,CAAtB,gBAAA;CAAA,CACoB,CAAA,CAApB,cAAA;CADA,CAEoB,CAAA,CAApB,cAAA;CAFA,CAImB,CAAA,CAAnB,aAAA;CAJA,CAKW,CAAA,CAAX,KAAA;CALA,CAOW,CAAA,CAAX,KAAA;CAPA,CAQmB,CAAA,CAAnB,aAAA;CARA,CAUY,EAAZ,MAAA;IAXJ;CAHH,CAAC\",\"sourceRoot\":\"tmp\"}","deps":[],"requires":{},"fn":"src/config.coffee"}}